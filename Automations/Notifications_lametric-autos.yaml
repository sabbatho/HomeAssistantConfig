############################################
##
## Theme automations
##
############################################

############################################
##
## All
##
############################################

#
#
#
- id: "Lametric_whats_on_chromecast_living_room"
  alias: "LaMetric_-_Whats_on_chromecast_vardagsrum"
  initial_state: true
  mode: single
  trigger:
    - platform: state
      entity_id: media_player.chromecast_ultra_vardags
      to: playing
    - platform: time_pattern
      minutes: "/5"
  condition:
    - condition: state
      entity_id: media_player.chromecast_ultra_vardags
      state: "playing"
  action:
    - delay:
        seconds: 3
    - service: notify.lmvardagsrum
      data:
        message: >
          {% if is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'YouTube') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Twitch Chromecast Player') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'TV4 Play v4') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'SVTPlay') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Plex') and is_state_attr('media_player.chromecast_ultra_vardags', 'media_content_type', 'tvshow') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_series_title') }} - {{ state_attr('media_player.chromecast_ultra_vardags', 'media_season') }} - {{ state_attr('media_player.chromecast_ultra_vardags', 'media_episode') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Plex') and is_state_attr('media_player.chromecast_ultra_vardags', 'media_content_type', 'movie') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'HBO Max') and is_state_attr('media_player.chromecast_ultra_vardags', 'media_content_type', 'tvshow') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_series_title') }} - {{ state_attr('media_player.chromecast_ultra_vardags', 'media_season') }} - {{ state_attr('media_player.chromecast_ultra_vardags', 'media_episode') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'HBO Max') and is_state_attr('media_player.chromecast_ultra_vardags', 'media_content_type', 'movie') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Spotify') %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_artist') }} - {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Netflix') %} 
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% else %}
            {{ state_attr('media_player.chromecast_ultra_vardags', 'media_title') }}
          {% endif %}
        data:
          icon: >-
            {% if is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'YouTube') %}
              a7320
            {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Twitch Chromecast Player') %}
              a4741
            {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'TV4 Play v4') %}
              a22705
            {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'SVTPlay') %}
              i26406
            {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Plex') and is_state_attr('media_player.chromecast_ultra_vardags', 'media_content_type', 'tvshow') %}
              a45882
            {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Plex') and is_state_attr('media_player.chromecast_ultra_vardags', 'media_content_type', 'movie') %}
              a45882
            {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Spotify') %}
              a12676
            {% elif is_state_attr('media_player.chromecast_ultra_vardags', 'app_name', 'Netflix') %} 
              a1442
            {% else %}
              a15626
            {% endif %}
          icon_type: "none"
          priority: "warning"
          cycles: 5
#
- id: "Lametric_whats_on_chromecast_bedroom"
  alias: "LaMetric_-_Whats_on_chromecast_bedroom"
  initial_state: true
  mode: single
  trigger:
    - platform: state
      entity_id: media_player.sovrum
      to: playing
    - platform: time_pattern
      minutes: "/5"
  condition:
    - condition: state
      entity_id: media_player.sovrum
      state: "playing"
  action:
    - delay:
        seconds: 3
    - service: notify.lmsovrum
      data:
        message: >
          {% if is_state_attr('media_player.sovrum', 'app_name', 'YouTube') %}
            {{ state_attr('media_player.sovrum', 'media_title') }}
          {% elif is_state_attr('media_player.sovrum', 'app_name', 'Twitch Chromecast Player') %}
            {{ state_attr('media_player.sovrum', 'media_title') }}
          {% elif is_state_attr('media_player.sovrum', 'app_name', 'TV4 Play v4') %}
            {{ state_attr('media_player.sovrum', 'media_title') }}
          {% elif is_state_attr('media_player.sovrum', 'app_name', 'Plex') and is_state_attr('media_player.sovrum', 'media_content_type', 'tvshow') %}
            {{ state_attr('media_player.sovrum', 'media_series_title') }} - {{ state_attr('media_player.sovrum', 'media_season') }} - {{ state_attr('media_player.sovrum', 'media_episode') }}
          {% elif is_state_attr('media_player.sovrum', 'app_name', 'Plex') and is_state_attr('media_player.sovrum', 'media_content_type', 'movie') %}
            {{ state_attr('media_player.sovrum', 'media_title') }}
          {% elif is_state_attr('media_player.sovrum', 'app_name', 'HBO Max') and is_state_attr('media_player.sovrum', 'media_content_type', 'tvshow') %}
            {{ state_attr('media_player.sovrum', 'media_series_title') }} - {{ state_attr('media_player.sovrum', 'media_season') }} - {{ state_attr('media_player.sovrum', 'media_episode') }}
          {% elif is_state_attr('media_player.sovrum', 'app_name', 'HBO Max') and is_state_attr('media_player.sovrum', 'media_content_type', 'movie') %}
            {{ state_attr('media_player.sovrum', 'media_title') }}
          {% elif is_state_attr('media_player.sovrum', 'app_name', 'Spotify') %}
            {{ state_attr('media_player.sovrum', 'media_artist') }} - {{ state_attr('media_player.sovrum', 'media_title') }}
          {% elif is_state_attr('media_player.sovrum', 'app_name', 'Netflix') %} 
            {{ state_attr('media_player.sovrum', 'media_title') }}
          {% else %}
            {{ state_attr('media_player.sovrum', 'media_title') }}
          {% endif %}
        data:
          icon: >-
            {% if is_state_attr('media_player.sovrum', 'app_name', 'YouTube') %}
              a7320
            {% elif is_state_attr('media_player.sovrum', 'app_name', 'Twitch Chromecast Player') %}
              a4741
            {% elif is_state_attr('media_player.sovrum', 'app_name', 'TV4 Play v4') %}
              a22705
            {% elif is_state_attr('media_player.sovrum', 'app_name', 'Plex') and is_state_attr('media_player.sovrum', 'media_content_type', 'tvshow') %}
              i15185
            {% elif is_state_attr('media_player.sovrum', 'app_name', 'Plex') and is_state_attr('media_player.sovrum', 'media_content_type', 'movie') %}
              i15185
            {% elif is_state_attr('media_player.sovrum', 'app_name', 'Spotify') %}
              a12676
            {% elif is_state_attr('media_player.sovrum', 'app_name', 'Netflix') %} 
              a1442
            {% else %}
              a15626
            {% endif %}
          icon_type: "none"
          priority: "warning"
          cycles: 5
#
- id: "Lametric_whats_on_chromecast_hobbyrum"
  alias: "LaMetric_-_Whats_on_chromecast_hobbyrum"
  initial_state: true
  mode: single
  trigger:
    - platform: state
      entity_id: media_player.hobbyrum
      to: playing
    - platform: time_pattern
      minutes: "/5"
  condition:
    - condition: state
      entity_id: media_player.hobbyrum
      state: "playing"
  action:
    - delay:
        seconds: 3
    - service: notify.lmhobbyrum
      data:
        message: >
          {% if is_state_attr('media_player.hobbyrum', 'app_name', 'YouTube') %}
            {{ state_attr('media_player.hobbyrum', 'media_title') }}
          {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Twitch Chromecast Player') %}
            {{ state_attr('media_player.hobbyrum', 'media_title') }}
          {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'TV4 Play v4') %}
            {{ state_attr('media_player.hobbyrum', 'media_title') }}
          {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Plex') and is_state_attr('media_player.hobbyrum', 'media_content_type', 'tvshow') %}
            {{ state_attr('media_player.hobbyrum', 'media_series_title') }} - {{ state_attr('media_player.hobbyrum', 'media_season') }} - {{ state_attr('media_player.hobbyrum', 'media_episode') }}
          {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Plex') and is_state_attr('media_player.hobbyrum', 'media_content_type', 'movie') %}
            {{ state_attr('media_player.hobbyrum', 'media_title') }}
          {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'HBO Max') and is_state_attr('media_player.hobbyrum', 'media_content_type', 'tvshow') %}
            {{ state_attr('media_player.hobbyrum', 'media_series_title') }} - {{ state_attr('media_player.hobbyrum', 'media_season') }} - {{ state_attr('media_player.hobbyrum', 'media_episode') }}
          {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'HBO Max') and is_state_attr('media_player.hobbyrum', 'media_content_type', 'movie') %}
            {{ state_attr('media_player.hobbyrum', 'media_title') }}
          {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Spotify') %}
            {{ state_attr('media_player.hobbyrum', 'media_artist') }} - {{ state_attr('media_player.hobbyrum', 'media_title') }}
          {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Netflix') %} 
            {{ state_attr('media_player.hobbyrum', 'media_title') }}
          {% else %}
            {{ state_attr('media_player.hobbyrum', 'media_title') }}
          {% endif %}
        data:
          icon: >-
            {% if is_state_attr('media_player.hobbyrum', 'app_name', 'YouTube') %}
              a7320
            {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Twitch Chromecast Player') %}
              a4741
            {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'TV4 Play v4') %}
              a22705
            {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Plex') and is_state_attr('media_player.hobbyrum', 'media_content_type', 'tvshow') %}
              i15185
            {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Plex') and is_state_attr('media_player.hobbyrum', 'media_content_type', 'movie') %}
              i15185
            {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Spotify') %}
              a12676
            {% elif is_state_attr('media_player.hobbyrum', 'app_name', 'Netflix') %} 
              a1442
            {% else %}
              a15626
            {% endif %}
          icon_type: "none"
          priority: "warning"
          cycles: 5
#
#
#
- id: "lametric_mobile_batt"
  alias: "LaMetric_-_battery_status_mobiles"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      minutes: 1
    - platform: time_pattern
      minutes: 11
    - platform: time_pattern
      minutes: 21
    - platform: time_pattern
      minutes: 31
    - platform: time_pattern
      minutes: 41
    - platform: time_pattern
      minutes: 51
  condition:
    - condition: or
      conditions:
        - condition: state
          entity_id: person.jimmy
          state: "home"
        - condition: state
          entity_id: person.hanna
          state: "home"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "{{ states.sensor.clt_l29_battery_level.state }}% Jimmy, {{ states.sensor.hanna_battery_level.state }}% Hanna"
        data:
          icon: "a10892"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmmatsal
      data:
        message: "{{ states.sensor.clt_l29_battery_level.state }}% Jimmy, {{ states.sensor.hanna_battery_level.state }}% Hanna"
        data:
          icon: "a10892"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmsovrum
      data:
        message: "{{ states.sensor.clt_l29_battery_level.state }}% Jimmy, {{ states.sensor.hanna_battery_level.state }}% Hanna"
        data:
          icon: "a10892"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmvardagsrum
      data:
        message: "{{ states.sensor.clt_l29_battery_level.state }}% Jimmy, {{ states.sensor.hanna_battery_level.state }}% Hanna"
        data:
          icon: "a10892"
          icon_type: "none"
          priority: "info"
          cycles: 2
#
- id: "lametric_nas"
  alias: "LaMetric_-_nas_svullo_used"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      minutes: 3
    - platform: time_pattern
      minutes: 13
    - platform: time_pattern
      minutes: 23
    - platform: time_pattern
      minutes: 33
    - platform: time_pattern
      minutes: 43
    - platform: time_pattern
      minutes: 53
  condition:
    - condition: or
      conditions:
        - condition: state
          entity_id: person.jimmy
          state: "home"
        - condition: state
          entity_id: person.hanna
          state: "home"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "{{ states.sensor.synology_volume_used_volume_1.state }}% Svullo"
        data:
          icon: "a7745"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmmatsal
      data:
        message: "{{ states.sensor.synology_volume_used_volume_1.state }}% Svullo"
        data:
          icon: "a7745"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmsovrum
      data:
        message: "{{ states.sensor.synology_volume_used_volume_1.state }}% Svullo"
        data:
          icon: "a7745"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmvardagsrum
      data:
        message: "{{ states.sensor.synology_volume_used_volume_1.state }}% Svullo"
        data:
          icon: "a7745"
          icon_type: "none"
          priority: "info"
          cycles: 2
#
- id: "lametric_wind"
  alias: "LaMetric_-_wind"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      minutes: 5
    - platform: time_pattern
      minutes: 15
    - platform: time_pattern
      minutes: 25
    - platform: time_pattern
      minutes: 35
    - platform: time_pattern
      minutes: 45
    - platform: time_pattern
      minutes: 55
  condition:
    - condition: or
      conditions:
        - condition: state
          entity_id: person.jimmy
          state: "home"
        - condition: state
          entity_id: person.hanna
          state: "home"
        - condition: state
          entity_id: input_boolean.visitors
          state: "on"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "{{ states.sensor.smhi_wind_speed.state }} m/s SMHI, {{ states.sensor.trafikverket_karlsvik_wind_speed.state }} m/s mot {{ states.sensor.trafikverket_karlsvik_wind_direction_text.state }} i Karlsvik"
        data:
          icon: "a9095"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmmatsal
      data:
        message: "{{ states.sensor.smhi_wind_speed.state }} m/s SMHI, {{ states.sensor.trafikverket_karlsvik_wind_speed.state }} m/s mot {{ states.sensor.trafikverket_karlsvik_wind_direction_text.state }} i Karlsvik"
        data:
          icon: "a9095"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmsovrum
      data:
        message: "{{ states.sensor.smhi_wind_speed.state }} m/s SMHI, {{ states.sensor.trafikverket_karlsvik_wind_speed.state }} m/s mot {{ states.sensor.trafikverket_karlsvik_wind_direction_text.state }} i Karlsvik"
        data:
          icon: "a9095"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmvardagsrum
      data:
        message: "{{ states.sensor.smhi_wind_speed.state }} m/s SMHI, {{ states.sensor.trafikverket_karlsvik_wind_speed.state }} m/s mot {{ states.sensor.trafikverket_karlsvik_wind_direction_text.state }} i Karlsvik"
        data:
          icon: "a9095"
          icon_type: "none"
          priority: "info"
          cycles: 2
#
- id: "lametric_temp"
  alias: "LaMetric_-_temperature"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      minutes: 7
    - platform: time_pattern
      minutes: 17
    - platform: time_pattern
      minutes: 27
    - platform: time_pattern
      minutes: 37
    - platform: time_pattern
      minutes: 47
    - platform: time_pattern
      minutes: 57
  condition:
    - condition: or
      conditions:
        - condition: state
          entity_id: person.jimmy
          state: "home"
        - condition: state
          entity_id: person.hanna
          state: "home"
        - condition: state
          entity_id: input_boolean.visitors
          state: "on"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "{{ states('sensor.ute') }} °C ute med {{ states('sensor.trafikverket_karlsvik_precipitation_type') }} och {{ states('sensor.smhi_thunder_probability') }}% chans till åska."
        data:
          icon: >-
            {% if is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Snö') %}
              a6887
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Regn') %}
              a3527
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Snöblandat regn') %}
              a160
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Ingen nederbörd') %}
              a11865
            {% else %}
              a35088
            {% endif %}
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmmatsal
      data:
        message: "{{ states('sensor.ute') }} °C ute med {{ states('sensor.trafikverket_karlsvik_precipitation_type') }} och {{ states('sensor.smhi_thunder_probability') }}% chans till åska."
        data:
          icon: >-
            {% if is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Snö') %}
              a6887
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Regn') %}
              a3527
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Snöblandat regn') %}
              a160
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Ingen nederbörd') %}
              a11865
            {% else %}
              a35088
            {% endif %}
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmsovrum
      data:
        message: "{{ states('sensor.ute') }} °C ute med {{ states('sensor.trafikverket_karlsvik_precipitation_type') }} och {{ states('sensor.smhi_thunder_probability') }}% chans till åska."
        data:
          icon: >-
            {% if is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Snö') %}
              a6887
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Regn') %}
              a3527
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Snöblandat regn') %}
              a160
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Ingen nederbörd') %}
              a11865
            {% else %}
              a35088
            {% endif %}
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmvardagsrum
      data:
        message: "{{ states('sensor.ute') }} °C ute med {{ states('sensor.trafikverket_karlsvik_precipitation_type') }} och {{ states('sensor.smhi_thunder_probability') }}% chans till åska."
        data:
          icon: >-
            {% if is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Snö') %}
              a6887
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Regn') %}
              a3527
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Snöblandat regn') %}
              a160
            {% elif is_state('sensor.trafikverket_karlsvik_precipitation_type', 'Ingen nederbörd') %}
              a11865
            {% else %}
              a35088
            {% endif %}
          icon_type: "none"
          priority: "info"
          cycles: 2
#
- id: "lametric_current_power"
  alias: "LaMetric_-_elförbrukning"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      minutes: 9
    - platform: time_pattern
      minutes: 19
    - platform: time_pattern
      minutes: 29
    - platform: time_pattern
      minutes: 39
    - platform: time_pattern
      minutes: 49
    - platform: time_pattern
      minutes: 59
  condition:
    - condition: or
      conditions:
        - condition: state
          entity_id: person.jimmy
          state: "home"
        - condition: state
          entity_id: person.hanna
          state: "home"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "Förbrukar nu {{ states('sensor.home_energy_meter_gen5_electric_consumption_w') }} W, och priset enligt Nordpool är {{ states('sensor.nordpool_kwh_se3_sek_3_10_025') }} kr/kwh."
        data:
          icon: a32930
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmmatsal
      data:
        message: "Förbrukar nu {{ states('sensor.home_energy_meter_gen5_electric_consumption_w') }} W, och priset enligt Nordpool är {{ states('sensor.nordpool_kwh_se3_sek_3_10_025') }} kr/kwh."
        data:
          icon: a32930
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmsovrum
      data:
        message: "Förbrukar nu {{ states('sensor.home_energy_meter_gen5_electric_consumption_w') }} W, och priset enligt Nordpool är {{ states('sensor.nordpool_kwh_se3_sek_3_10_025') }} kr/kwh."
        data:
          icon: a32930
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmvardagsrum
      data:
        message: "Förbrukar nu {{ states('sensor.home_energy_meter_gen5_electric_consumption_w') }} W, och priset enligt Nordpool är {{ states('sensor.nordpool_kwh_se3_sek_3_10_025') }} kr/kwh."
        data:
          icon: a32930
          icon_type: "none"
          priority: "info"
          cycles: 2
#
#
#
- id: "lametric_guest_mode"
  alias: "LaMetric_-_gästläge"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      minutes: "/30"
  condition:
    - condition: state
      entity_id: input_boolean.visitors
      state: "on"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "Guest mode is ON"
        data:
          icon: "a12050"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmmatsal
      data:
        message: "Guest mode is ON"
        data:
          icon: "a12050"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmsovrum
      data:
        message: "Guest mode is ON"
        data:
          icon: "a12050"
          icon_type: "none"
          priority: "info"
          cycles: 2
    - service: notify.lmvardagsrum
      data:
        message: "Guest mode is ON"
        data:
          icon: "a12050"
          icon_type: "none"
          priority: "info"
          cycles: 2
#
- id: "lametric_garage_las"
  alias: "LaMetric_-_Garage_lås"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      hours: "/1"
  condition:
    - condition: state
      entity_id: binary_sensor.garagelas
      state: "on"
      for:
        hours: 1
    - condition: or
      conditions:
        - condition: state
          entity_id: person.jimmy
          state: "home"
        - condition: state
          entity_id: person.hanna
          state: "home"
        - condition: state
          entity_id: input_boolean.visitors
          state: "on"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "Garaget är inte låst!"
        data:
          icon: "a464"
          icon_type: "none"
          sound: "statistic"
          priority: "warning"
          cycles: 1
    - service: notify.lmmatsal
      data:
        message: "Garaget är inte låst!"
        data:
          icon: "a464"
          icon_type: "none"
          sound: "statistic"
          priority: "warning"
          cycles: 1
    - service: notify.lmsovrum
      data:
        message: "Garaget är inte låst!"
        data:
          icon: "a464"
          icon_type: "none"
          sound: "statistic"
          priority: "warning"
          cycles: 1
    - service: notify.lmvardagsrum
      data:
        message: "Garaget är inte låst!"
        data:
          icon: "a464"
          icon_type: "none"
          sound: "statistic"
          priority: "warning"
          cycles: 1
    - service: notify.hanna_jimmy
      data:
        message: "Garaget är inte låst, just a reminder"
#
- id: "lametric_jimmy_hemma_kl"
  alias: "LaMetric_-_jimmy_hemma_kl"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      minutes: "/10"
  condition:
    - condition: state
      entity_id: person.jimmy
      state: "not_home"
    - condition: state
      entity_id: person.hanna
      state: "home"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "Jimmy kommer hem {{ states('sensor.jimmy_kommer_hem') }}"
        data:
          icon: "a1172"
          icon_type: "none"
          priority: "warning"
          cycles: 2
    - service: notify.lmmatsal
      data:
        message: "Jimmy kommer hem {{ states('sensor.jimmy_kommer_hem') }}"
        data:
          icon: "a1172"
          icon_type: "none"
          priority: "warning"
          cycles: 2
    - service: notify.lmsovrum
      data:
        message: "Jimmy kommer hem {{ states('sensor.jimmy_kommer_hem') }}"
        data:
          icon: "a1172"
          icon_type: "none"
          priority: "warning"
          cycles: 2
    - service: notify.lmvardagsrum
      data:
        message: "Jimmy kommer hem {{ states('sensor.jimmy_kommer_hem') }}"
        data:
          icon: "a1172"
          icon_type: "none"
          priority: "warning"
          cycles: 2
#
- id: "lametric_hanna_hemma_kl"
  alias: "LaMetric_-_hanna_hemma_kl"
  initial_state: true
  mode: single
  trigger:
    - platform: time_pattern
      minutes: "/10"
  condition:
    - condition: state
      entity_id: person.jimmy
      state: "home"
    - condition: state
      entity_id: person.hanna
      state: "not_home"
  action:
    - service: notify.lmhobbyrum
      data:
        message: "Hanna kommer hem {{ states('sensor.hanna_kommer_hem') }}"
        data:
          icon: "a1172"
          icon_type: "none"
          priority: "warning"
          cycles: 2
    - service: notify.lmmatsal
      data:
        message: "Hanna kommer hem {{ states('sensor.hanna_kommer_hem') }}"
        data:
          icon: "a1172"
          icon_type: "none"
          priority: "warning"
          cycles: 2
    - service: notify.lmsovrum
      data:
        message: "Hanna kommer hem {{ states('sensor.hanna_kommer_hem') }}"
        data:
          icon: "a1172"
          icon_type: "none"
          priority: "warning"
          cycles: 2
    - service: notify.lmvardagsrum
      data:
        message: "Hanna kommer hem {{ states('sensor.hanna_kommer_hem') }}"
        data:
          icon: "a1172"
          icon_type: "none"
          priority: "warning"
          cycles: 2
#
